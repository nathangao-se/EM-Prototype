<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RA+ Admin</title>
  
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@400;600;700&display=swap" rel="stylesheet">
  
  <!-- Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  
  <!-- Component Styles -->
  <link rel="stylesheet" href="styles/base.css">
  <link rel="stylesheet" href="styles/header.css">
  <link rel="stylesheet" href="styles/goals.css">
  <link rel="stylesheet" href="styles/dashboard.css">
  <link rel="stylesheet" href="styles/visualization.css">
  <link rel="stylesheet" href="styles/modal.css">
  <link rel="stylesheet" href="styles/dev-panel.css">
  <link rel="stylesheet" href="styles/project-bar.css">
  <link rel="stylesheet" href="styles/page-transition.css">
  <link rel="stylesheet" href="styles/wizard-base.css">
  <link rel="stylesheet" href="wizards/inventory/inventory.css">
  <link rel="stylesheet" href="wizards/campaign/campaign.css">
  <link rel="stylesheet" href="wizards/activity-map/activity-map.css">
  <link rel="stylesheet" href="wizards/calc-methods/calc-methods.css">
  <link rel="stylesheet" href="wizards/calc-methods/activity-collection.css">
  <link rel="stylesheet" href="wizards/calc-methods/variation-builder.css">
  <link rel="stylesheet" href="wizards/normalize-activities/normalize-activities.css">
  <link rel="stylesheet" href="wizards/activity-data-setup/activity-data-setup.css">
  <link rel="stylesheet" href="wizards/upload-wizard/upload-wizard.css">
  <link rel="stylesheet" href="ghg-engine/ghg-engine.css">
  <link rel="stylesheet" href="styles/clickable-hints.css">
</head>
<body>
  <div class="app-container">
    
    <!-- ========== HEADER SECTION ========== -->
    <header class="header">
      <div class="header-main">
        <div class="header-logo">
          <i class="fa-solid fa-leaf" style="font-size: 28px; color: #008029;"></i>
        </div>
        <h1 class="header-title">RA+ Admin</h1>
        <nav class="header-actions">
          <button class="btn btn-outline">
            <i class="fa-solid fa-database"></i>
            <span>Libraries/data</span>
          </button>
          <button class="btn btn-outline">
            <i class="fa-regular fa-envelope"></i>
            <span>org settings</span>
          </button>
        </nav>
      </div>
      <div class="header-user">
        <div class="header-notification">
          <i class="fa-solid fa-bell" style="font-size: 18px; color: #676f73;"></i>
        </div>
        <div class="header-avatar">
          <i class="fa-solid fa-circle-user" style="font-size: 32px; color: #676f73;"></i>
        </div>
      </div>
    </header>

    <!-- ========== GOALS SECTION (rendered dynamically from config) ========== -->
    <section class="goals"></section>

    <!-- ========== PROJECT STATUS BAR (modular, config-driven) ========== -->
    <section class="project-bar project-bar--hidden"></section>

    <!-- ========== DASHBOARD SECTION ========== -->
    <section class="dashboard">
      <!-- Dashboard Tabs -->
      <div class="dashboard-tabs">
        <button class="dashboard-tab dashboard-tab--active">Navigator</button>
        <button class="dashboard-tab">Custom view</button>
      </div>
      
      <!-- Dashboard Content (Regular View) -->
      <div class="dashboard-content">
        
        <!-- [SELECTION] Left Section - Selectors -->
        <div class="dashboard-selection">
          <!-- Dynamic Control Area (Map/Diagram/Visualization) -->
          <div class="dashboard-control-card">
            <div id="visualization-container"></div>
          </div>
          
          <!-- Hierarchy List -->
          <div class="dashboard-card dashboard-hierarchy-card">
            <div class="dashboard-card-header">
              <span class="dashboard-card-title">Hierarchy</span>
            </div>
            <div class="dashboard-hierarchy-divider"></div>
            
            <!-- Hierarchy Items - World Level (populated by JS) -->
            <div class="dashboard-hierarchy-items"></div>
          </div>
        </div>
        <!-- /[SELECTION] -->
        
        <!-- Vertical Divider -->
        <div class="dashboard-divider"></div>
        
        <!-- [DASH CONTENT] Sites List Card -->
        <div class="dashboard-card dashboard-detail-nav">
          <div class="dashboard-card-header dashboard-detail-header">
            <button class="dashboard-collapse-btn dashboard-collapse-btn-nav" id="collapse-btn-nav">
              <i class="fa-solid fa-chevron-left"></i>
              <span>Back</span>
            </button>
            <span class="dashboard-card-title">Global Portfolio sites</span>
            <button class="dashboard-expand-btn">
              <span>Expand</span>
              <i class="fa-solid fa-chevron-right"></i>
            </button>
          </div>
          
          <div class="dashboard-detail-divider"></div>
          
          <!-- Site List (populated by JS on load) -->
          <div class="dashboard-detail-collapsed"></div>
        </div>
        
        <!-- [DASH CONTENT EXPANDED] Site Detail Card (visible when expanded) -->
        <div class="dashboard-card dashboard-detail-expanded">
          <div class="dashboard-card-header dashboard-detail-expanded-header">
            <span class="dashboard-card-title dashboard-detail-expanded-title">Select a site</span>
          </div>
          
          <div class="dashboard-detail-divider"></div>
          
          <div class="dashboard-detail-expanded-content">
            <p class="dashboard-detail-placeholder">Click a site on the left to view details</p>
            <table class="dashboard-table" style="display: none;">
              <thead>
                <tr>
                  <th>Category</th>
                  <th>Issue</th>
                  <th>Severity</th>
                  <th>Date</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>
        <!-- /[DASH CONTENT] -->
        
      </div>
    </section>

  </div>

  <!-- ========== MODAL ========== -->
  <div id="modal-overlay" class="modal-overlay">
    <div class="modal">
      <div class="modal-header">
        <span class="modal-header-title"></span>
        <button class="modal-close-btn"><i class="fa-solid fa-xmark"></i></button>
      </div>
      <div class="modal-body">
        <div class="modal-list-pane">
          <div class="modal-list-scroll"></div>
        </div>
        <div class="modal-detail-pane">
          <div class="modal-detail-placeholder">Select an item to view details</div>
          <div class="modal-detail-content">
            <div>
              <h3 class="modal-detail-title"></h3>
              <div class="modal-detail-header-meta"></div>
            </div>
            <p class="modal-detail-description"></p>
            <div class="modal-history"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ========== INVENTORY WIZARD OVERLAY ========== -->
  <div id="inv-wizard-overlay" class="wizard-overlay">
    <div class="wizard inv-wizard">
      <div class="wizard-header">
        <span class="wizard-header-title"></span>
        <button class="wizard-close-btn"><i class="fa-solid fa-xmark"></i></button>
      </div>
      <div class="wizard-body"></div>
      <div class="wizard-footer"></div>
    </div>
  </div>

  <!-- ========== CAMPAIGN WIZARD OVERLAY ========== -->
  <div id="dcc-wizard-overlay" class="wizard-overlay">
    <div class="wizard dcc-wizard">
      <div class="wizard-header">
        <span class="wizard-header-title"></span>
        <button class="wizard-close-btn"><i class="fa-solid fa-xmark"></i></button>
      </div>
      <div class="wizard-body"></div>
      <div class="wizard-footer"></div>
    </div>
  </div>

  <!-- ========== COLUMNS NORMALIZE MODAL ========== -->
  <div id="columns-normalize-overlay" class="normalize-overlay">
    <div class="normalize-modal">
      <div class="normalize-header">
        <h2 class="normalize-title">Normalize columns</h2>
        <button type="button" class="columns-normalize-close" title="Close"><i class="fa-solid fa-xmark"></i></button>
      </div>
      <div class="normalize-body">
        <div class="uw-s1-banner">
          <div class="uw-s1-banner-icon"><i class="fa-light fa-circle-info"></i></div>
          <div class="uw-s1-banner-text">
            <p>For accurate calculations, your data columns need to conform to our standard data set. We found unclear columns in your data that don't match our standard set, please reconcile the items below.</p>
          </div>
        </div>
        <div id="columns-normalize-content"></div>
      </div>
      <div class="normalize-footer">
        <a href="#" class="columns-normalize-discard"><i class="fa-solid fa-trash"></i> Discard</a>
        <div class="normalize-footer-actions">
          <button type="button" class="btn btn-primary columns-normalize-save">Save</button>
        </div>
      </div>
    </div>
  </div>

  <!-- ========== NORMALIZE ACTIVITIES MODAL ========== -->
  <div id="normalize-overlay" class="normalize-overlay">
    <div class="normalize-modal">
      <div class="normalize-header">
        <h2 class="normalize-title">Normalize activities</h2>
        <button type="button" class="normalize-close-btn" title="Close"><i class="fa-solid fa-xmark"></i></button>
      </div>
      <div class="normalize-body">
        <div class="normalize-cards-row"></div>
        <div class="normalize-main">
          <div class="normalize-left"></div>
          <div class="normalize-right"></div>
        </div>
      </div>
      <div class="normalize-footer">
        <a href="#" class="normalize-discard"><i class="fa-solid fa-trash"></i> Discard setup</a>
        <div class="normalize-footer-actions">
          <button type="button" class="btn btn-outline normalize-back">Back</button>
          <button type="button" class="btn btn-primary normalize-next">Next: add emissions files</button>
        </div>
      </div>
    </div>
  </div>

  <!-- ========== ACTIVITY DATA SETUP (upload flow entry) ========== -->
  <div id="activity-data-setup-overlay" class="activity-data-setup-overlay">
    <div class="activity-data-setup-modal">
      <div class="activity-data-setup-header">
        <div class="activity-data-setup-header-text">
          <h2 class="activity-data-setup-title">Set up and add your activity data</h2>
          <p class="activity-data-setup-description">Here you can add your organization's activity data, which is the foundation on which all your calculations will be based.</p>
        </div>
        <button type="button" class="activity-data-setup-close" title="Close"><i class="fa-solid fa-xmark"></i></button>
      </div>
      <div class="activity-data-setup-body">
        <div class="activity-data-setup-cards">
          <div class="activity-data-setup-card" data-option="upload">
            <div class="activity-data-setup-card-icon"><i class="fa-solid fa-file-arrow-up"></i></div>
            <span class="activity-data-setup-card-label">Add/upload/migrate activity data</span>
          </div>
          <div class="activity-data-setup-card" data-option="api">
            <div class="activity-data-setup-card-icon"><i class="fa-solid fa-plug"></i></div>
            <span class="activity-data-setup-card-label">Import via API</span>
          </div>
          <div class="activity-data-setup-card" data-option="campaign">
            <div class="activity-data-setup-card-icon"><i class="fa-solid fa-keyboard"></i></div>
            <span class="activity-data-setup-card-label">Data request campaign</span>
          </div>
        </div>
      </div>
      <div class="activity-data-setup-footer">
        <p class="activity-data-setup-footer-text">By the end of this setup, you'll have provided clean data that we can then analyze for deeper standardization.</p>
        <button type="button" class="btn btn-outline activity-data-setup-cancel">Cancel</button>
      </div>
    </div>
  </div>

  <!-- ========== UPLOAD WIZARD (upload flow step 1+) ========== -->
  <div id="upload-wizard-overlay" class="upload-wiz-overlay">
    <div class="upload-wiz">
      <div class="upload-wiz-header">
        <h2 class="upload-wiz-title">Set up and add your files</h2>
        <button type="button" class="upload-wiz-close" title="Close"><i class="fa-solid fa-xmark"></i></button>
      </div>
      <div class="upload-wiz-steps">
        <button class="upload-wiz-step upload-wiz-step--active" data-step="0">1. Add activity files</button>
        <button class="upload-wiz-step" data-step="1">2. Initial cleanup</button>
        <button class="upload-wiz-step" data-step="2">3. Review / collaborate</button>
      </div>
      <div class="upload-wiz-body"></div>
      <div class="uw-s2-check-row" style="display:none">
        <label class="uw-s2-checkbox-label">
          <span class="uw-s2-checkbox-box"><input type="checkbox" class="uw-s2-checkbox-input" /></span>
          <span class="uw-s2-checkbox-text">Take me directly to normalization after completion (May take dedicated work time)</span>
        </label>
      </div>
      <div class="upload-wiz-footer">
        <a href="#" class="upload-wiz-discard"><i class="fa-solid fa-trash"></i> Discard files and exit</a>
        <div class="upload-wiz-footer-actions">
          <button type="button" class="btn btn-outline upload-wiz-back">Back</button>
          <button type="button" class="btn btn-primary upload-wiz-next">Next: add emissions files</button>
        </div>
      </div>
    </div>
  </div>

  <!-- ========== DEV PANEL ========== -->
  <div id="dev-panel" class="dev-panel dev-panel--expanded">
    <button id="dev-panel-toggle" class="dev-panel-toggle">Ã— Dev</button>
    <div class="dev-panel-content">
      <div class="dev-panel-section">
        <div class="dev-panel-label">Perspective</div>
        <div class="dev-panel-options">
          <button class="dev-panel-option dev-panel-option--active" data-config="global-oversight">Global Admin</button>
          <button class="dev-panel-option" data-config="site-manager">Site Manager</button>
        </div>
      </div>
      <div class="dev-panel-section">
        <div class="dev-panel-label">Screens &amp; flows</div>
        <div class="dev-panel-options">
          <span class="dev-panel-hint" data-hint="No UI trigger yet &mdash; will be wired to goal card action">Create Inventory</span>
          <span class="dev-panel-hint" data-hint="No UI trigger yet &mdash; will be wired to goal card action">Data Collection</span>
          <span class="dev-panel-hint" data-hint="Data management page &rarr; left column &ldquo;Normalize&rdquo; links">Normalize activities</span>
          <span class="dev-panel-hint" data-hint="Project bar &rarr; &ldquo;Add files&rdquo;, or Data management &rarr; &ldquo;+ Add files/data&rdquo;">Activity data setup</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts (order matters: utils first, then configs, then components, then dev tools) -->
  <script src="js/utils.js"></script>
  <script src="js/config-global-oversight.js"></script>
  <script src="js/config-site-manager.js"></script>
  <script src="js/modal.js"></script>
  <script src="js/goals.js"></script>
  <script src="js/project-bar.js"></script>
  <script src="js/page-transition.js"></script>
  <script src="js/visualization.js"></script>
  <script src="js/dashboard.js"></script>
  <script src="wizards/inventory/inventory.js"></script>
  <script src="wizards/campaign/campaign.js"></script>
  <script src="wizards/activity-map/activity-map.js"></script>
  <script src="wizards/calc-methods/calc-methods.js"></script>
  <script src="wizards/calc-methods/activity-collection.js"></script>
  <script src="wizards/calc-methods/variation-builder.js"></script>
  <script src="ghg-engine/ghg-engine.js"></script>
  <script src="wizards/normalize-activities/normalize-activities.js"></script>
  <script src="wizards/activity-data-setup/activity-data-setup.js"></script>
  <script src="excel-parser/app.js"></script>
  <script src="wizards/upload-wizard/upload-wizard.js"></script>
  <script>
  (function () {
    var overlay = document.getElementById('columns-normalize-overlay');
    if (!overlay) return;
    var contentEl = document.getElementById('columns-normalize-content');
    var closeBtn = overlay.querySelector('.columns-normalize-close');
    var discardBtn = overlay.querySelector('.columns-normalize-discard');
    var saveBtn = overlay.querySelector('.columns-normalize-save');

    function open() {
      if (window.getColumnsTabHTML) {
        contentEl.innerHTML = window.getColumnsTabHTML();
        if (window.bindColumnsTabEvents) window.bindColumnsTabEvents(contentEl);
      }
      overlay.classList.add('normalize-overlay--open');
      document.body.style.overflow = 'hidden';
    }

    function close() {
      overlay.classList.remove('normalize-overlay--open');
      document.body.style.overflow = '';
    }

    window.openColumnsNormalizeModal = open;
    closeBtn.addEventListener('click', close);
    discardBtn.addEventListener('click', function (e) { e.preventDefault(); close(); });
    saveBtn.addEventListener('click', close);
    overlay.addEventListener('click', function (e) { if (e.target === overlay) close(); });
    document.addEventListener('keydown', function (e) {
      if (e.key === 'Escape' && overlay.classList.contains('normalize-overlay--open')) close();
    });
  })();
  </script>
  <script src="js/clickable-hints.js"></script>
  <script src="js/dev-panel.js"></script>
</body>
</html>
